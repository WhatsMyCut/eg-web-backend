(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{454:function(e,t,n){e.exports=n(805)},459:function(e,t,n){},461:function(e,t,n){},483:function(e,t,n){},784:function(e,t,n){},805:function(e,t,n){"use strict";n.r(t);n(455),n(231),n(459),n(461);var a=n(0),r=n.n(a),i=n(55),o=n.n(i),l=n(91),c=n(66),u=n(822),s=n(421),d=n(27),m=n(428),p=n(429),h=n(440),f=n(439),g=(n(808),n(425)),y=(n(168),"earth_guardians_auth");n(233).config("../../.env");var v=new h.a({uri:"https://egdemobackend.herokuapp.com/"}),b=new f.a({delay:{initial:300,max:1/0,jitter:!0},attempts:{max:3,retryIf:function(e,t){var n=t.query;return"query"===Object(g.e)(n).operation}}}),E=Object(p.a)(function(e){var t=e.graphQLErrors,n=e.networkError;e.operation;t&&t.map(function(e){var t=e.message,n=e.locations,a=e.path;return console.log("multiple errors",JSON.stringify({message:t,locations:n,path:a})),t}),n&&console.log("Network error: ".concat(n))}),_=Object(m.a)(function(e,t){var n=t.headers,a=localStorage.getItem(y);return Object(c.a)({},t,{headers:Object(c.a)({},n,{authorization:"Bearer ".concat(a)})})}),C=new s.a({ssrForceFetchDelay:100,link:d.a.from([_,E,b,v]),connectToDevTools:!0,cache:new u.a}),x=n(22),O=n(23),w=n(25),k=n(24),j=n(26),A=(n(483),n(832)),$=n(833),S=n(783),T=n(16),I=n(835),D=n(29);function R(){var e=Object(T.a)(["\n      @media (",": ",") {\n        ","\n      }\n    "]);return R=function(){return e},e}var M={mobileS:"320px",mobileM:"375px",mobileL:"425px",phablet:"600px",tablet:"768px",laptop:"1024px",laptopL:"1440px",desktop:"2560px"},G=function(e,t){return Object.keys(e).reduce(function(n,a){return n[a]=function(){return Object(D.a)(R(),t,e[a],D.a.apply(void 0,arguments))},n},{})},L=(G(M,"min-width"),G(M,"max-width")),U="mercury text g1 a,mercury text g1 b,mercury text g1,Helvetica,Arial,open sans,sans-serif",N={linkText:{lineHeight:1.5,display:"block",fontStyle:"italic",cursor:"pointer",fontFamily:U}},B=n(46),P=n(31),F=n.n(P);function V(){var e=Object(T.a)(["\n\tmutation Login($username: String!, $password: String!) {\n\t\tlogin(username: $username, password: $password) {\n\t\ttoken\n\t\tuser {\n\t\t\tid\n\t\t\tname\n\t\t}\n\t\t}\n\t}\n"]);return V=function(){return e},e}var W,H=F()(V()),Y=n(826),q=n(828),z=n(423),J=[],Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(g.e)(e),a=n.kind,i=n.operation;if("OperationDefinition"!==a||"query"!==i)return Object(l.graphql)(e,t);var o=t.name||"data";return function(n){var a,i,c;return Object(l.graphql)(e,t)((c=i=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={fetching:!1},n._refetch=function(){var e=new Date;n.setState({fetching:!0}),Promise.all(J.map(function(e){return e()})).then(function(){n.setState({fetching:!1})}).catch(function(){var t=new Date-e;window.setTimeout(function(){n.setState({fetching:!1})},Math.max(0,500-t))})},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"componentWillMount",value:function(){this._addRefetch(this.props)}},{key:"componentWillUpdate",value:function(e){this._removeRefetch(this.props),this._addRefetch(e)}},{key:"componentWillUnmount",value:function(){this._removeRefetch(this.props)}},{key:"_addRefetch",value:function(e){var t=e[o];t&&J.push(t.refetch)}},{key:"_removeRefetch",value:function(e){var t=e[o];if(t){var n=J.indexOf(t.refetch);n>=0&&J.splice(n,1)}}},{key:"render",value:function(){var e=this.props[o];return e&&e.error?this._renderError(e.error):r.a.createElement(n,this.props)}},{key:"_renderError",value:function(e){var t=this.state.fetching;return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(Y.a,{negative:!0,compact:!0},r.a.createElement("p",null,e.message),r.a.createElement(q.a,{primary:!0,fluid:!0,loading:t,disabled:t,onClick:this._refetch},r.a.createElement(z.a,{name:"refresh",size:"large"}),"Retry")))}}]),t}(r.a.Component),i.displayName="MyGraphQL(".concat(n.displayName||n.name,")"),a=c))||a}},K="#2C2C2C",Z="#D8D8D8",X="#2B6C99";function ee(){var e=Object(T.a)(["\n \n"]);return ee=function(){return e},e}function te(){var e=Object(T.a)(["\n \n"]);return te=function(){return e},e}function ne(){var e=Object(T.a)(["\n\n"]);return ne=function(){return e},e}function ae(){var e=Object(T.a)(["\n  \n"]);return ae=function(){return e},e}function re(){var e=Object(T.a)(["\n \n"]);return re=function(){return e},e}function ie(){var e=Object(T.a)(["\n \n"]);return ie=function(){return e},e}function oe(){var e=Object(T.a)(["\n  \n"]);return oe=function(){return e},e}var le=D.b.div(oe()),ce=D.b.div(ie());ce.TextHeader=D.b.h2(re()),ce.LoginForm=D.b.div(ae());var ue=ce.LoginForm;ue.InputContainer=D.b.div(ne()),ue.Input=Object(D.b)(B.Input)(te()),ue.LoginButton=Object(D.b)(B.Button)(ee());var se=Q(H,{name:"login"})(W=Object(I.a)(W=function(e){function t(e){var n;return Object(x.a)(this,t),(n=Object(w.a)(this,Object(k.a)(t).call(this,e))).handleInputChange=function(e){"username"===e.target.name?n.setState({username:e.target.value}):n.setState({password:e.target.value})},n.toggleRememberMe=function(){n.setState({rememberMe:!n.state.rememberMe})},n.handleLogin=function(){var e=n.props,t=e.history,a=e.login,r=n.state.loading;n.setState({loading:!r}),a({variables:{username:n.state.username,password:n.state.password}}).then(function(e){if(e.data.login.token){var a=e.data.login.token;localStorage.setItem(y,a),t.push("/home")}else console.error("there was an error inside .then"),n.setState({loading:!0})}).catch(function(e){console.error("there was an error inside error",JSON.stringify(e));var t=e.graphQLErrors.length>0?e.graphQLErrors[0].message:"There was a network error, please try again!";n.setState({loading:!1,error:t})})},n.state={username:"",password:"",rememberMe:!1,loading:!1,error:null},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loading;e.error;return r.a.createElement(le,null,r.a.createElement(ce.LoginForm,null,r.a.createElement(ce.TextHeader,null,"Log into your Earth Guardians Account"),r.a.createElement(ue.InputContainer,null,r.a.createElement(ue.Input,{type:"username",name:"username",placeholder:"username",value:this.state.username,onChange:this.handleInputChange}),r.a.createElement(ue.Input,{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement(ue.LoginButton,{loading:t,onClick:this.handleLogin},"Log In"),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement(B.Checkbox,{type:"checkbox",id:"rememberMe",checked:this.state.rememberMe,onChange:this.toggleRememberMe,style:{paddingTop:"7px",paddingBottom:"20px",fontFamily:U}}),r.a.createElement("label",{style:{color:"white",fontSize:"14px",fontFamily:"inherit",marginLeft:"5px"}},"Remember Me")),r.a.createElement("a",{style:N.linkText},"Forgot your password?"),r.a.createElement("a",{style:N.linkText},"Need to create an account?")))}}]),t}(a.Component))||W)||W;function de(){var e=Object(T.a)(["\n  height: 100vh;\n  width: 100vw;\n"]);return de=function(){return e},e}var me=D.b.div(de()),pe=function(e){e.routes;return r.a.createElement(me,null,r.a.createElement(S.a,{exact:!0,path:"/login",component:se}))},he=n(829);function fe(){var e=Object(T.a)(["\n  {\n    me {\n      id\n      name\n      role {\n        role_name\n      }\n    }\n  }\n"]);return fe=function(){return e},e}var ge=F()(fe());var ye,ve=n(821),be=n(830),Ee=function(){return r.a.createElement(ve.a,{textAlign:"center",style:{paddingTop:"25%"}},r.a.createElement(be.a,{as:"h1"},"Page Not Found"),r.a.createElement(be.a,{as:"h2"},"404"))},_e=n(834);function Ce(){var e=Object(T.a)(["\n  width: 100vw;\n  height: 95vh;\n  margin-top: 5vh;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  background-color: black;\n"]);return Ce=function(){return e},e}var xe=D.b.div(Ce()),Oe=Object(I.a)(ye=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={count:0},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state.count;return r.a.createElement(xe,null,r.a.createElement(we,{text:"Actions",drop:e>=1,backgroundImage:"https://humandesign.com/wp-content/uploads/2018/11/Ladder-Grab-6.jpg",path:"/actions"}),r.a.createElement(we,{text:"Games",drop:e>=2,backgroundImage:"https://humandesign.com/wp-content/uploads/2018/04/VTS_03.jpg",path:"/games"}),r.a.createElement(we,{text:"Petitions",drop:e>=3,backgroundImage:"https://humandesign.com/wp-content/uploads/2018/04/3.jpg",path:"/petitions"}),r.a.createElement(we,{text:"Users",drop:e>=4,backgroundImage:"https://humandesign.com/wp-content/uploads/2018/03/BFH_PDP_Hero_01-1.jpg",path:"/users"}))}},{key:"componentDidMount",value:function(){var e=this,t=1,n=setInterval(function(){t<=4?(e.setState({count:t}),t++):clearInterval(n)},300)}}]),t}(a.Component))||ye,we=function(e){var t=["home-third-section"];return!0===e.drop&&t.push("drop"),r.a.createElement(_e.a,{className:t.join(" "),style:{backgroundImage:"url(".concat(e.backgroundImage)||"",color:"black"},to:e.path},r.a.createElement("div",{style:{fontSize:"4vw",fontWeight:900,display:!0===e.drop?"block":"none"}},e.text))},ke=Oe,je=n(824),Ae=n(827),$e={navbar:{height:"5vh",backgroundColor:K,width:"100vw",position:"fixed",left:0,top:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between",zIndex:999},navbarIcon:{color:Z},navbarLink:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},navbarText:{color:Z,paddingTop:".425rem",paddingBottom:".425rem"},navbarMenu:{height:"100%",backgroundColor:K,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},subNav:{left:"4.125rem",backgroundColor:"#E7E7E7"},subNavIcon:{verticalAlign:"middle",marginRight:".3125rem"},subMenu:{backgroundColor:"#D7D7D7",boxShadow:"none",border:"none"},activeSubMenu:{backgroundColor:"#D7D7D7"}};function Se(){var e=Object(T.a)(["\n\tcolor: "," !important;\n\tpaddingTop: .425rem;\n\tpaddingBottom: .425rem;\n"]);return Se=function(){return e},e}function Te(e){e.name;var t=e.history,n=r.a.createElement(Ie,{className:"item"},r.a.createElement("i",null,"Account")),a=[{key:"sign-out",text:"Sign Out",icon:"sign out",onClick:function(){localStorage.removeItem(y),t.push("/login")}}];return r.a.createElement(je.a,{trigger:n,options:a,pointing:"right",icon:null,style:{display:"flex",flexDirection:"column",justifyContent:"center"}})}var Ie=D.b.div(Se(),Z);function De(e){return r.a.createElement("div",{style:$e.navbar},r.a.createElement(Ae.a,{borderless:!0,fluid:!0,style:$e.navbarMenu},r.a.createElement(_e.a,{to:"/home",style:$e.navbarLink},r.a.createElement("div",{className:"item",style:$e.navbarText},"LogoHere")),r.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-end"}},r.a.createElement(_e.a,{to:"/actions",style:Object(c.a)({},$e.navbarLink,{display:"/home"===e.location.pathname?"none":"flex"})},r.a.createElement(Ie,{className:"item"},r.a.createElement("i",null,"Actions"))),r.a.createElement(_e.a,{to:"/games",style:Object(c.a)({},$e.navbarLink,{display:"/home"===e.location.pathname?"none":"flex"})},r.a.createElement(Ie,{className:"item"},r.a.createElement("i",null,"Games"))),r.a.createElement(_e.a,{to:"/petitions",style:Object(c.a)({},$e.navbarLink,{display:"/home"===e.location.pathname?"none":"flex"})},r.a.createElement(Ie,{className:"item"},r.a.createElement("i",null,"Petitions"))),r.a.createElement(_e.a,{to:"/users",style:Object(c.a)({},$e.navbarLink,{display:"/home"===e.location.pathname?"none":"flex"})},r.a.createElement(Ie,{className:"item"},r.a.createElement("i",null,"Users"))),r.a.createElement(Te,{name:"Account",history:e.history,style:{height:"100%"}}))))}var Re=n(441);n(784);function Me(e){var t=e.size,n=void 0===t?"small":t,a=e.name,i=e.outline,o=Object(Re.a)(e,["size","name","outline"]),l={tiny:"md-18",small:"md-24",medium:"md-36",large:"md-48"}[n];return i?r.a.createElement("i",Object.assign({className:"outline-".concat(a," material-icons-outline outline-").concat(l)},o)):r.a.createElement("i",Object.assign({className:"material-icons ".concat(l)},o),a)}var Ge=n(823),Le=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,value:""},n._onClose=function(){var e=n.props.onClose;e&&e()},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=(this.state.value,this.props),n=t.entityType,a=(t.entity,t.modalContent);return r.a.createElement(Ge.a,{open:!0,closeIcon:!0,onClose:this._onClose},r.a.createElement(be.a,{icon:"archive",content:"Add/Edit ".concat(n)}),r.a.createElement(Ge.a.Content,null,a),r.a.createElement(Ge.a.Actions,null,r.a.createElement(q.a,{color:"red",onClick:this._onClose},r.a.createElement(z.a,{name:"remove"})," Cancel"),r.a.createElement(q.a,{color:"green",onClick:function(){e._saveMutation()}},r.a.createElement(z.a,{name:"remove"})," Save")))}},{key:"_saveMutation",value:function(e){var t=this.props.save;this.setState({loading:!0}),t()}}]),t}(a.Component);function Ue(){var e=Object(T.a)(["\n  margin: 0;\n  display: flex;\n  flexdirection: row;\n  justifycontent: flex-end;\n  alignitems: center;\n"]);return Ue=function(){return e},e}function Ne(){var e=Object(T.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n"]);return Ne=function(){return e},e}var Be=D.b.div(Ne()),Pe=D.b.div(Ue()),Fe=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(i)))).getTitleText=function(e){var t=n.props,a=t.clickable,i=t.onClick;return a?r.a.createElement("a",{style:{cursor:"pointer"},onClick:i},e):e},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.entityType,a=e.openModal,i=e.style;return r.a.createElement(Be,{style:i},r.a.createElement(B.Header,{as:"h1",style:{margin:0}},this.getTitleText(t)),r.a.createElement(Pe,null,r.a.createElement(B.Button,{primary:!0,onClick:a,style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",fontSize:"16px"}},r.a.createElement(Me,{name:"add"}),"New ",n)))}}]),t}(a.Component);function Ve(){var e=Object(T.a)(["\n  overflow-y: auto;\n"]);return Ve=function(){return e},e}function We(){var e=Object(T.a)(["\n  margin: 0;\n  display: flex;\n  flexdirection: row;\n  justifycontent: flex-end;\n  alignitems: center;\n"]);return We=function(){return e},e}function He(){var e=Object(T.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n"]);return He=function(){return e},e}function Ye(){var e=Object(T.a)(["\n  width: 100vw;\n  height: auto;\n  min-height: 95vh;\n  max-height: 95vh;\n  margin-top: 5vh;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  background-color: white;\n  overflow-y: auto;\n"]);return Ye=function(){return e},e}var qe,ze=D.b.div(Ye()),Je=(D.b.div(He()),D.b.div(We()),D.b.div(Ve())),Qe=function(e){function t(){return Object(x.a)(this,t),Object(w.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,a=e.entityType,i=e.openModal;return r.a.createElement(ze,null,r.a.createElement(Fe,{title:n,entityType:a,openModal:i}),r.a.createElement("hr",null),r.a.createElement(Je,null,t))}}]),t}(a.Component),Ke=n(825),Ze=n(436),Xe=n.n(Ze),et={formatTime:function(e){if("object"===typeof(e=e&&"Z"===e.toString().substring(e.length-1)?new Date(e):e)){var t=e.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][e.getMonth()],a=e.getDate(),r=e.getHours(),i=r>=12?"PM":"AM";r=(r=0===r?12:r)>12?r-12:r;var o=e.getMinutes();return o=o<10?"0"+o:o,"".concat(n," ").concat(a,", ").concat(t," - ").concat(r,":").concat(o," ").concat(i)}return""},arrayIncludes:function(e,t){return!!Array.isArray(e)&&e.some(function(e){return e===t})},trueFalseToYesNo:function(e){return e?"Yes":"No"},truncateText:function(e,t){return e.length>t?"".concat(e.substring(0,t-1),"..."):e}};function tt(){var e=Object(T.a)(["\n      table, thead, tbody, th, td, tr { \n        display: block; \n      }\n      \n      thead tr { \n        position: absolute;\n        top: -9999px;\n        left: -9999px;\n      }\n      \n      tr { border: 1px solid #ccc; }\n      \n      td { \n        display: flex;\n        justify-content: space-between;\n        border: none;\n        border-bottom: 1px solid #eee; \n        position: relative;\n        padding-left: 50%; \n      }\n\n      td.mobile-center {\n        justify-content: center;\n      }\n\n      td:before { \n        width: 45%; \n        padding-right: 10px; \n        white-space: nowrap;\n      }\n      \n      ","\n  "]);return tt=function(){return e},e}function nt(){var e=Object(T.a)(["\n  /* https://css-tricks.com/responsive-data-tables/ */\n\n  ","\n"]);return nt=function(){return e},e}var at,rt=Object(D.b)(Ke.a)(nt(),function(e){return e.collapsable&&L.tablet(tt(),function(e){return e.cellHeaderTitles.map(function(e,t){return"\n        td:nth-of-type(".concat(t+1,'):before {\n          content: "').concat(Xe.a.title(e),'";\n          font-weight: bold;\n        }\n      ')})})}),it=Object(I.a)(qe=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(i)))).handleHyperlinkClick=function(e,t){var a=n.getColumnFunction(n.props.hyperlinkFunctions,t);a&&a(e)},n.getContent=function(e,t,a){n.props.history;return et.arrayIncludes(n.props.hyperlinkColumns,a)?r.a.createElement("a",{style:{cursor:"pointer"},onClick:function(){n.handleHyperlinkClick(e,a)}},n.getText(e,t,a)):n.getText(e,t,a)},n.getText=function(e,t,a){var r,i=e[t.replace(/\s/g,"")];return et.arrayIncludes(n.props.formatColumns,a)?(r=n.getColumnFunction(n.props.formatFunctions,a))?r(i):i:"boolean"===typeof i?et.trueFalseToYesNo(i):i},n.getColumnFunction=function(e,t){var n=e.filter(function(e){return e.index===t})[0];return n?n.fn:null},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data})}},{key:"render",value:function(){var e=this,t=this.props,n=t.headings,a=t.data,i=t.style,o=t.leftAlignColumns,l=t.editable,u=t.edit,s=t.collapsable;return r.a.createElement("div",{className:"container",style:Object(c.a)({},ot.container,i)},r.a.createElement(rt,{celled:!0,unstackable:!0,collapsable:s},r.a.createElement(rt.Header,null,r.a.createElement(rt.Row,null,n.map(function(e){return r.a.createElement(rt.HeaderCell,{style:{color:X},key:"".concat(e.replace(/\s/g,""),"-heading")},e)}),l&&r.a.createElement(rt.HeaderCell,null))),r.a.createElement(rt.Body,null,a.map(function(t,a){return r.a.createElement(rt.Row,{key:"row-".concat(a)},n.map(function(n,a){return r.a.createElement(rt.Cell,{style:{textAlign:et.arrayIncludes(o,a)?"left":"right"},key:"".concat(n,"-").concat(a)},e.getContent(t,n,a))}),l&&r.a.createElement(rt.Cell,{className:"mobile-center",style:{color:X,cursor:"pointer"},onClick:function(){return u(t.ID)}},"Edit"))}))))}}]),t}(r.a.Component))||qe,ot={container:{width:"100%",height:"auto"},header:{fontFamily:["Open Sans","sans-serif"],fontSize:"0.9rem",lineHeight:"24px",letterSpacing:"1.5%",color:X}},lt=it,ct=function(e){return r.a.createElement(B.Input,{fluid:!0,value:e.value,label:e.label,placeholder:e.label,onChange:function(t){e.onChange(t)},style:{marginBottom:"5px"}})},ut=function(e){return r.a.createElement("div",{className:"ui fluid labeled input",style:{display:"flex",flexDirection:"row",marginBottom:"5px"}},r.a.createElement("strong",{className:"ui label label"},e.label),r.a.createElement(B.TextArea,{onChange:function(t){e.onChange(t)},value:e.value,label:e.label,style:st.textArea}))},st={textArea:{flex:1,border:"1px solid rgba(34,36,38,.15)",borderLeftColor:"transparent",borderBottomRightRadius:".28571429rem",borderTopRightRadius:".28571429rem",paddingTop:"0.678571em",paddingRight:"1em",paddingBottom:"0.678571em",paddingLeft:"1em"}},dt=function(e){return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:"5px"}},r.a.createElement("strong",null,e.label),r.a.createElement(B.Checkbox,{checked:e.value,onChange:function(t){e.onChange(t)},style:{marginLeft:"5px"},label:""}))},mt=Object(I.a)(at=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={options:pt(n.props.options),currentValues:n.props.currentValues||[],addingOption:!1},n.handleChange=function(e,t){var a=t.value,r=setInterval(function(){if(!n.state.addingOption){var e=n.props.multiple;clearInterval(r);var t=e?ht(n.state.currentValues,a,n.props.id):{action:"change",value:a};n.setState({currentValues:a},function(){n.props.onChange&&n.props.onChange(t)})}},50)},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({options:pt(e.options),currentValues:e.currentValues})}},{key:"render",value:function(){var e=this.state,t=e.currentValues,n=e.options,a=e.addingOption,i=this.props,o=i.label,l=i.multiple;return r.a.createElement("div",{className:"ui fluid labeled input",style:{display:"flex",flexDirection:"row",marginBottom:"5px"}},r.a.createElement("strong",{className:"ui label label",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o),l?r.a.createElement(je.a,{options:n,placeholder:o||"Select an Option",search:!0,selection:!0,fluid:!0,multiple:!0,value:t,onChange:this.handleChange,disabled:a,style:gt.dropdown}):r.a.createElement(je.a,{options:n,placeholder:o||"Select an Option",search:!0,selection:!0,fluid:!0,value:t,onChange:this.handleChange,disabled:a,style:gt.dropdown}))}}]),t}(r.a.Component))||at,pt=function(e){return Array.isArray(e)&&e[0]?e[0].key&&e[0].text&&e[0].value?e:e.map(function(e){return{key:e.key||e,text:e.text||e,value:e.value||e}}):[]},ht=function(e,t,n){for(var a=[],r=0;r<e.length;r++)a[e[r]]=!0;for(r=0;r<t.length;r++)a[t[r]]?delete a[t[r]]:a[t[r]]=!0;var i=Object.keys(a)[0];return et.arrayIncludes(e,i)?{action:"remove",value:i,id:n}:{action:"add",value:i,id:n}},ft=mt,gt={dropdown:{flex:1,display:"flex",flexDirection:"row",alignItems:"center",border:"1px solid rgba(34,36,38,.15)",borderLeftColor:"transparent",borderBottomRightRadius:".28571429rem",borderTopRightRadius:".28571429rem",paddingTop:"0.22619em",paddingRight:"2.1em",paddingBottom:"0.22619em",paddingLeft:"0.357143em"}};function yt(){var e=Object(T.a)(["\n  mutation CreateAction(\n    $primary_image: String\n    $active: Boolean\n    $short_description: String!\n    $action_taken_description: String!\n    $schedule: Schedule\n    $video_url: String\n    $carbon_dioxide: Float\n    $water: Float\n    $waste: Float\n    $points: Int\n    $external_url: String\n    $isGame: Boolean\n    $author_id: ID!\n    $category_id: ID!\n  ) {\n    createAction(\n      data: {\n        primary_image: $primary_image\n        active: $active\n        short_description: $short_description\n        action_taken_description: $action_taken_description\n        schedule: $schedule\n        video_url: $video_url\n        carbon_dioxide: $carbon_dioxide\n        water: $water\n        waste: $waste\n        points: $points\n        external_url: $external_url\n        isGame: $isGame\n        author: { connect: { id: $author_id } }\n        category: { connect: { id: $category_id } }\n      }\n    ) {\n      id\n      short_description\n    }\n  }\n"]);return yt=function(){return e},e}var vt=F()(yt());function bt(){var e=Object(T.a)(["\n    mutation UpdateAction(\n        $id: ID!\n        $primary_image: String\n        $active: Boolean\n        $short_description: String!\n        $action_taken_description: String!\n        $schedule: Schedule\n        $video_url: String\n        $carbon_dioxide: Float\n        $game_title:String\n        $order: Int\n        $water: Float\n        $waste: Float\n        $points: Int\n        $external_url: String\n        $isGame: Boolean\n        $relatedActionIds: [ActionWhereUniqueInput!]\n        $relatedActionIdsToRemove: [ActionWhereUniqueInput!]\n    ) {\n    updateAction(\n        where: {\n            id: $id\n        },\n        data: {\n            primary_image: $primary_image\n            active: $active\n            short_description: $short_description\n            action_taken_description: $action_taken_description\n            schedule: $schedule\n            video_url: $video_url\n            carbon_dioxide: $carbon_dioxide\n            order: $order\n            water: $water\n            waste: $waste\n            points: $points\n            game_title :$game_title\n            external_url: $external_url\n            isGame: $isGame\n            related_actions: {\n                connect: $relatedActionIds\n                disconnect: $relatedActionIdsToRemove\n            }\n        }\n    ) {\n      id\n      short_description\n    }\n  }\n"]);return bt=function(){return e},e}var Et,_t=F()(bt()),Ct=Q(vt,{name:"createAction"})(Et=Q(_t,{name:"updateAction"})(Et=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(i)))).state={entity:n.props.entity,initialRelatedActionIds:n.props.entity.related_actions.map(function(e){return e.id})},n.save=function(){var e=n.props,t=e.onClose,a=e.createAction,r=e.updateAction,i=n.state,o=i.entity,l=i.initialRelatedActionIds,c=o;if(c.water=parseFloat(c.water),c.waste=parseFloat(c.waste),c.carbon_dioxide=parseFloat(c.carbon_dioxide),c.points=parseInt(c.points),c.order=parseInt(c.order),o.id){var u=c.related_actions.map(function(e){return e.id});c.relatedActionIdsToRemove=l.filter(function(e){return!et.arrayIncludes(u,e)}).map(function(e){return{id:e}}),c.relatedActionIds=c.related_actions.map(function(e){return{id:e.id}}),r({variables:c}).then(function(e){t()})}else a({variables:c}).then(function(e){t()})},n.getContent=function(){var e=n.state.entity,t=n.props,a=t.relatedActionsOptions;return"Action"===t.entityType?[r.a.createElement(ut,{key:"short-desc-input",value:e.short_description||"",label:"Short Description",onChange:function(e){n.updateEntity(e,"short_description")}}),r.a.createElement(ct,{key:"order-input",value:e.order,label:"Order",onChange:function(e){n.updateEntity(e,"order")}}),r.a.createElement(ft,{key:"schedule-input",currentValues:e.schedule||xt[0],options:xt,label:"Schedule",onChange:function(e){n.updateSchedule(e)}}),r.a.createElement(ct,{key:"carbon_dioxide-input",value:e.carbon_dioxide||"",label:"Carbon Dioxide",onChange:function(e){n.updateEntity(e,"carbon_dioxide")}}),r.a.createElement(ct,{key:"water-input",value:e.water||"",label:"Water",onChange:function(e){n.updateEntity(e,"water")}}),r.a.createElement(ct,{key:"waste-input",value:e.waste||"",label:"Waste",onChange:function(e){n.updateEntity(e,"waste")}}),r.a.createElement(ct,{key:"points-input",value:e.points||"",label:"Points",onChange:function(e){n.updateEntity(e,"points")}}),r.a.createElement(ct,{key:"primary-image-input",value:e.primary_image||"",label:"Primary Image",onChange:function(e){n.updateEntity(e,"primary_image")}}),r.a.createElement(ct,{key:"video-input",value:e.video_url||"",label:"Video",onChange:function(e){n.updateEntity(e,"video_url")}}),r.a.createElement(ct,{key:"external-game-tital",value:e.game_title||"",label:"Game Title",onChange:function(e){n.updateEntity(e,"game_title")}}),r.a.createElement(ct,{key:"external-url-input",value:e.external_url||"",label:"External URL",onChange:function(e){n.updateEntity(e,"external_url")}}),r.a.createElement(ft,{key:"related-actions-input",currentValues:e.related_actions?e.related_actions.map(function(e){return e.id}):[],label:"Games",multiple:!0,options:n.toDropdownOptions(a,"short_description"),onChange:function(e){n.updateRelatedActions(e)}}),r.a.createElement(dt,{key:"isGame-input",value:e.isGame,label:"Game",onChange:function(e){n.updateEntityBoolean(e,"isGame")}}),r.a.createElement(dt,{key:"active-input",value:e.active,label:"Active",onChange:function(e){n.updateEntityBoolean(e,"active")}}),r.a.createElement("div",{key:"author"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Author:"),e.author.name||""),r.a.createElement("div",{key:"created-at"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Created At:"),"".concat(et.formatTime(e.createdAt))),r.a.createElement("div",{key:"updated-at"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Updated At:"),"".concat(et.formatTime(e.updatedAt)))]:[r.a.createElement(ut,{key:"short-desc-input",value:e.short_description||"",label:"Short Description",onChange:function(e){n.updateEntity(e,"short_description")}}),r.a.createElement(ct,{key:"order-input",value:e.order,label:"Order",onChange:function(e){n.updateEntity(e,"order")}}),r.a.createElement(ft,{key:"schedule-input",currentValues:e.schedule||xt[0],options:xt,label:"Schedule",onChange:function(e){n.updateSchedule(e)}}),r.a.createElement(ct,{key:"carbon_dioxide-input",value:e.carbon_dioxide||"",label:"Carbon Dioxide",onChange:function(e){n.updateEntity(e,"carbon_dioxide")}}),r.a.createElement(ct,{key:"water-input",value:e.water||"",label:"Water",onChange:function(e){n.updateEntity(e,"water")}}),r.a.createElement(ct,{key:"waste-input",value:e.waste||"",label:"Waste",onChange:function(e){n.updateEntity(e,"waste")}}),r.a.createElement(ct,{key:"points-input",value:e.points||"",label:"Points",onChange:function(e){n.updateEntity(e,"points")}}),r.a.createElement(ct,{key:"primary-image-input",value:e.primary_image||"",label:"Primary Image",onChange:function(e){n.updateEntity(e,"primary_image")}}),r.a.createElement(ct,{key:"video-input",value:e.video_url||"",label:"Video",onChange:function(e){n.updateEntity(e,"video_url")}}),r.a.createElement(ct,{key:"external-url-input",value:e.external_url||"",label:"External URL",onChange:function(e){n.updateEntity(e,"external_url")}}),r.a.createElement(dt,{key:"isGame-input",value:e.isGame,label:"Game",onChange:function(e){n.updateEntityBoolean(e,"isGame")}}),r.a.createElement(dt,{key:"active-input",value:e.active,label:"Active",onChange:function(e){n.updateEntityBoolean(e,"active")}}),r.a.createElement("div",{key:"author"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Author:"),e.author.name||""),r.a.createElement("div",{key:"created-at"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Created At:"),"".concat(et.formatTime(e.createdAt))),r.a.createElement("div",{key:"updated-at"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Updated At:"),"".concat(et.formatTime(e.updatedAt)))]},n.updateEntity=function(e,t){var a=n.state.entity;if(e.target.value!==a[t]){var r=Object.assign({},a);r[t]=e.target.value,n.setState({entity:r})}},n.updateEntityBoolean=function(e,t){var a=n.state.entity,r=Object.assign({},a);r[t]=!r[t],n.setState({entity:r})},n.updateRelatedActions=function(e){var t=n.state.entity,a=n.props.relatedActionsOptions,r=Object.assign({},t);if("add"===e.action){var i=a.filter(function(t){return t.id===e.value})[0];!!t.related_actions&&t.related_actions.some(function(t){return t.id===e.value})||r.related_actions.push(i)}else{var o;r.related_actions.some(function(t,n){if(t.id===e.value)return o=n,!0}),r.related_actions.splice(o,1)}n.setState({entity:r})},n.updateSchedule=function(e){var t=n.state.entity;if(e.action&&e.value){var a=Object.assign({},t);a.schedule=e.value,n.setState({entity:a})}},n.toDropdownOptions=function(e,t){return e.map(function(e){return{key:e.id,value:e.id,text:e[t]}})||[]},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state.entity,t=this.props,n=t.entityType,a=t.onClose,i=this.getContent();return r.a.createElement(Le,{onClose:a,entityType:n,entity:e,modalContent:i,save:this.save})}}]),t}(a.Component))||Et)||Et,xt=["ANYTIME","ONCE","DAILY","BIWEEKLY","WEEKLY","TWOWEEKS","MONTHLY","QUARTERLY","SEMIANNUALLY","ANNUALLY"];function Ot(){var e=Object(T.a)(["\n  mutation CreateCategory(\n    $name: String!\n    $primary_image: String\n    $video_id: String\n  ) {\n    createActionCategory(\n      data: { name: $name, primary_image: $primary_image, video_id: $video_id }\n    ) {\n      id\n      name\n    }\n  }\n"]);return Ot=function(){return e},e}var wt=F()(Ot());function kt(){var e=Object(T.a)(["\n  mutation UpdateCategory(\n      $id: ID!,\n      $name: String!\n      $primary_image: String,\n      $video_id: String,\n      ) {\n    updateActionCategory(where: {\n        id: $id\n    },\n        data: {\n        name: $name,\n\t\tprimary_image: $primary_image,\n        video_id: $video_id\n    }) {\n        id\n        name\n    }\n  }\n"]);return kt=function(){return e},e}var jt,At=F()(kt()),$t=Q(wt,{name:"createCategory"})(jt=Q(At,{name:"updateCategory"})(jt=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(i)))).state={entity:n.props.entity},n.save=function(){var e=n.props,t=e.onClose,a=e.createCategory,r=e.updateCategory,i=n.state.entity,o=i;o.order=parseInt(o.order),i.id?r({variables:o}).then(function(e){t()}):a({variables:o}).then(function(e){t()})},n.getContent=function(){var e=n.state.entity;return[r.a.createElement(ct,{key:"name-input",value:e.name||"",label:"Name",onChange:function(e){n.updateEntity(e,"name")}}),r.a.createElement(ct,{key:"primary-image-input",value:e.primary_image||"",label:"Primary Image",onChange:function(e){n.updateEntity(e,"primary_image")}}),r.a.createElement(ct,{key:"video-id-input",value:e.video_id||"",label:"Video Id",onChange:function(e){n.updateEntity(e,"video_id")}}),r.a.createElement("div",{key:"actions"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Actions:"),e.actions.filter(function(e){return!1===e.isGame}).map(function(e){return et.truncateText(e.short_description,50)}).join(", ")),r.a.createElement("div",{key:"games"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Games:"),e.actions.filter(function(e){return!0===e.isGame}).map(function(e){return et.truncateText(e.short_description,50)}).join(", ")),r.a.createElement("div",{key:"created-at"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Created At:"),"".concat(et.formatTime(e.createdAt))),r.a.createElement("div",{key:"updated-at"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Updated At:"),"".concat(et.formatTime(e.updatedAt)))]},n.updateEntity=function(e,t){var a=n.state.entity;if(e.target.value!==a[t]){var r=Object.assign({},a);r[t]=e.target.value,n.setState({entity:r})}},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state.entity,t=this.props.onClose,n=this.getContent();return r.a.createElement(Le,{onClose:t,entityType:"Category",entity:e,modalContent:n,save:this.save})}}]),t}(a.Component))||jt)||jt,St=n(831);function Tt(){var e=Object(T.a)(["\n  {\n    actionCategories{\n      id\n      name\n      primary_image\n      video_id\n      createdAt\n      updatedAt\n      actions {\n        id\n        primary_image\n        active\n        short_description\n        action_taken_description\n        schedule\n        video_url\n        carbon_dioxide\n        order\n        water\n        waste\n        points\n        external_url\n        author {\n          name\n        }\n        related_actions{\n          id\n          short_description\n        }\n        isGame\n        createdAt\n        updatedAt\n      }\n    }\n    \n  }\n"]);return Tt=function(){return e},e}var It,Dt,Rt=F()(Tt()),Mt={id:"",name:"",primary_image:"",video_id:"",actions:[],createdAt:"",updatedAt:""},Gt={id:"",category:{id:"",name:"",actions:[],createdAt:"",updatedAt:""},order:"",primary_image:"",active:!1,short_description:"",action_taken_description:"",schedule:"ANYTIME",video_url:"",carbon_dioxide:0,water:0,waste:0,points:0,external_url:"",isGame:!1,related_actions:[],author:{name:""},createdAt:"",updatedAt:""},Lt=(It=Q(Rt,{name:"all_actions_by_category"}),Object(I.a)(Dt=It(Dt=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(i)))).state={modal:null,modalOpen:!1,entity:Mt,entityType:"Category"},n.openModal=function(e,t,a){e.category_id=a.id,n.setState({entity:e,modalOpen:!0,entityType:t||n.state.entityType,selectedCategory:a})},n._onCloseModal=function(){n.props.all_actions_by_category.refetch(),n.setState({modalOpen:null,entity:Mt})},n.getTable=function(e){return n.isGameView()?r.a.createElement(lt,{headings:["Short Description","Order","Active","Author","Created At","Updated At"],data:e.actions.filter(function(e){return!0===e.isGame}).map(function(e){return{Id:e.id,Category:e.category,Order:e.order,PrimaryImage:e.primary_image,Active:e.active,ShortDescription:""!==e.short_description?e.short_description:"No Description",ActionTakenDescription:e.action_taken_description,Schedule:e.schedule,VideoURL:e.video_url,CarbonDioxide:e.carbon_dioxide,Water:e.water,Waste:e.waste,ExternalURL:e.external_url,IsGame:e.isGame,Author:e.author.name,CreatedAt:new Date(e.createdAt),UpdatedAt:new Date(e.updatedAt)}}),leftAlignColumns:[0,1,2,3,4,5],hyperlinkColumns:[0],hyperlinkFunctions:[{index:0,fn:function(t){var a=n.isGameView()?"Game":"Action";n.openModal(e.actions.filter(function(e){return e.id===t.Id})[0],a,e)}}],formatColumns:[4,5],formatFunctions:[{index:4,fn:function(e){return et.formatTime(e)}},{index:5,fn:function(e){return et.formatTime(e)}}]}):r.a.createElement(lt,{headings:["Short Description","Order","Active","Games","Author","Created At","Updated At"],data:e.actions.filter(function(e){return!1===e.isGame}).map(function(e){return{Id:e.id,Category:e.category,Order:e.order,PrimaryImage:e.primary_image,Active:e.active,ShortDescription:""!==e.short_description?e.short_description:"No Description",ActionTakenDescription:e.action_taken_description,Schedule:e.schedule,VideoURL:e.video_url,CarbonDioxide:e.carbon_dioxide,Water:e.water,Waste:e.waste,GameTitle:e.game_title,ExternalURL:e.external_url,IsGame:e.isGame,RelatedActions:e.related_actions?e.related_actions.map(function(e){return et.truncateText(e.short_description,50)}).join(", "):null,Author:e.author.name,CreatedAt:new Date(e.createdAt),UpdatedAt:new Date(e.updatedAt)}}),leftAlignColumns:[0,1,2,3,4,5,6],hyperlinkColumns:[0],hyperlinkFunctions:[{index:0,fn:function(t){var a=n.isGameView()?"Game":"Action";n.openModal(e.actions.filter(function(e){return e.id===t.Id})[0],a,e)}}],formatColumns:[5,6],formatFunctions:[{index:5,fn:function(e){return et.formatTime(e)}},{index:6,fn:function(e){return et.formatTime(e)}}]})},n.isGameView=function(){return"/games"===n.props.match.path},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.all_actions_by_category,a=t.user;return n.loading?r.a.createElement(St.a,{loading:!0,style:{height:"100vh",width:"100vw"}}):[r.a.createElement(Qe,{key:"actions-management-view",title:this.isGameView()?"Games":"Actions",entityType:"Category",openModal:function(){e.setState({modalOpen:!0,entity:Mt,entityType:"Category"})},style:{overflowY:"auto"}},n.actionCategories.map(function(t){return e.isGameView()&&(Gt.isGame=!0),r.a.createElement(St.a,{key:"".concat(t.name.replace(/\s/g,""),"-category")},r.a.createElement(Fe,{title:t.name,clickable:!0,onClick:function(){e.setState({modalOpen:!0,entity:t,entityType:"Category"})},entityType:e.isGameView()?"Game":"Action",openModal:function(){Gt.category_id=t.id,Gt.author_id=a.me.id,Gt.category=t,e.setState({modalOpen:!0,entity:Gt,entityType:e.isGameView()?"Game":"Action",selectedCategory:t})},style:{marginBottom:"10px"}}),e.getTable(t))})),this._renderModal()]}},{key:"_renderModal",value:function(){var e=this.state,t=e.entity,n=e.modalOpen,a=e.entityType,i=e.selectedCategory;if(!n)return null;switch(a){case"Category":return r.a.createElement($t,{key:"category-modal",entity:t,onClose:this._onCloseModal});case"Game":return t.order=void 0!==t.order&&null!==t.order&&""!==t.order?t.order:i.actions.length+1,r.a.createElement(Ct,{key:"game-modal",entity:t,entityType:"Game",onClose:this._onCloseModal});case"Action":var o=i?i.actions.filter(function(e){return!0===e.isGame}):[];return t.category_id=i.id,t.order=void 0!==t.order&&null!==t.order&&""!==t.order?t.order:i.actions.length+1,t.related_actions=t.related_actions||[],t.isGame=!1,r.a.createElement(Ct,{key:"action-modal",entity:t,entityType:"Action",onClose:this._onCloseModal,relatedActionsOptions:o});default:return null}}}]),t}(a.Component))||Dt)||Dt),Ut=n(437),Nt=n.n(Ut),Bt=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){(0,n.props.onChange)({target:{value:e}})},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.value;return r.a.createElement("div",{className:"ui fluid labeled input",style:{display:"flex",flexDirection:"row",marginBottom:"5px"}},r.a.createElement("strong",{className:"ui label label"},t),r.a.createElement(Nt.a,{value:n,onChange:this.handleChange,style:Pt.quill}))}}]),t}(a.Component),Pt={quill:{width:"100%",height:"100%",border:"1px solid rgba(34,36,38,.15)",borderLeftColor:"transparent",borderBottomRightRadius:".28571429rem",borderTopRightRadius:".28571429rem"}};function Ft(){var e=Object(T.a)(["\n\tmutation CreatePetition(\n\t\t$title: String!\n\t\t$active: Boolean\n\t\t$short_description: String!\n\t\t$body: String!\n\t\t$order: Int\n\t\t$primary_image: String\n\t\t$video_url: String\n\t\t$external_url: String\n\t\t$author_id: ID!\n\t) {\n\t\tcreatePetition(\n\t\t\tdata: {\n\t\t\t\ttitle: $title\n\t\t\t\tactive: $active\n\t\t\t\tshort_description: $short_description\n\t\t\t\tbody: $body\n\t\t\t\torder: $order\n\t\t\t\tprimary_image: $primary_image\n\t\t\t\tvideo_url: $video_url\n\t\t\t\texternal_url: $external_url\n\t\t\t\tauthor: { connect: { id: $author_id } }\n\t\t\t}\n\t\t) {\n\t\tid\n\t\ttitle\n\t\t}\n\t}\n"]);return Ft=function(){return e},e}var Vt=F()(Ft());function Wt(){var e=Object(T.a)(["\n  mutation UpdatePetition(\n        $id: ID!\n        $title: String!\n\t\t$active: Boolean\n\t\t$short_description: String!\n\t\t$body: String!\n\t\t$order: Int\n\t\t$primary_image: String\n\t\t$video_url: String\n\t\t$external_url: String\n      ) {\n    updatePetition(where: {\n        id: $id\n    },\n        data: {\n            title: $title\n\t\t\tactive: $active\n\t\t\tshort_description: $short_description\n\t\t\tbody: $body\n\t\t\torder: $order\n\t\t\tprimary_image: $primary_image\n\t\t\tvideo_url: $video_url\n\t\t\texternal_url: $external_url\n    }) {\n        id\n        title\n    }\n  }\n"]);return Wt=function(){return e},e}var Ht,Yt=F()(Wt()),qt=Q(Vt,{name:"createPetition"})(Ht=Q(Yt,{name:"updatePetition"})(Ht=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(i)))).state={entity:n.props.entity},n.save=function(){var e=n.props,t=e.onClose,a=e.createPetition,r=e.updatePetition,i=n.state.entity,o=i;o.order=parseInt(o.order),i.id?r({variables:o}).then(function(e){t()}):a({variables:o}).then(function(e){t()})},n.getContent=function(){var e=n.state.entity;return[r.a.createElement(ct,{key:"title-input",value:e.title||"",label:"Title",onChange:function(e){n.updateEntity(e,"title")}}),r.a.createElement(ct,{key:"order-input",value:e.order,label:"Order",onChange:function(e){n.updateEntity(e,"order")}}),r.a.createElement(ut,{key:"short-desc-input",value:e.short_description||"",label:"Short Description",onChange:function(e){n.updateEntity(e,"short_description")}}),r.a.createElement(Bt,{key:"body-input",value:e.body||"",label:"Body",onChange:function(e){n.updateEntity(e,"body")}}),r.a.createElement(ct,{key:"primary-image-input",value:e.primary_image||"",label:"Primary Image",onChange:function(e){n.updateEntity(e,"primary_image")}}),r.a.createElement(ct,{key:"video-input",value:e.video_url||"",label:"Video",onChange:function(e){n.updateEntity(e,"video_url")}}),r.a.createElement(ct,{key:"external-url-input",value:e.external_url||"",label:"External URL",onChange:function(e){n.updateEntity(e,"external_url")}}),r.a.createElement(dt,{key:"active-input",value:e.active,label:"Active",onChange:function(e){n.updateEntityBoolean(e,"active")}}),r.a.createElement("div",{key:"users"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Users:"),e.users?e.users.map(function(e){return e.name}).join(", "):[]),r.a.createElement("div",{key:"author"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Author:"),e.author.name||""),r.a.createElement("div",{key:"created-at"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Created At:"),"".concat(et.formatTime(e.createdAt))),r.a.createElement("div",{key:"updated-at"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Updated At:"),"".concat(et.formatTime(e.updatedAt)))]},n.updateEntity=function(e,t){var a=n.state.entity;if(e.target.value!==a[t]){var r=Object.assign({},a);r[t]=e.target.value,n.setState({entity:r})}},n.updateEntityBoolean=function(e,t){var a=n.state.entity,r=Object.assign({},a);r[t]=!r[t],n.setState({entity:r})},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state.entity,t=this.props.onClose,n=this.getContent();return r.a.createElement(Le,{onClose:t,entityType:"Petition",entity:e,modalContent:n,save:this.save})}}]),t}(a.Component))||Ht)||Ht;function zt(){var e=Object(T.a)(["\n  {\n    petitions{\n      id\n      title\n      active\n      short_description\n      body\n      order\n      primary_image\n      video_url\n      external_url\n      users{\n          name\n      }\n      author{\n          id\n          name\n      }\n      createdAt\n      updatedAt\n    }\n  }\n"]);return zt=function(){return e},e}var Jt,Qt,Kt=F()(zt()),Zt={id:"",order:"",title:"",active:!1,short_description:"",body:"",primary_image:"",video_url:"",external_url:"",users:[],author:{name:""},createdAt:"",updatedAt:""},Xt=(Jt=Q(Kt,{name:"all_petitions"}),Object(I.a)(Qt=Jt(Qt=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={modal:null,modalOpen:!1,entity:Zt},n.openModal=function(e){n.setState({entity:e,modalOpen:!0})},n._onCloseModal=function(){n.props.all_petitions.refetch(),n.setState({modalOpen:null,entity:Zt})},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props.all_petitions;return t.loading?r.a.createElement(St.a,{loading:!0,style:{height:"100vh",width:"100vw"}}):[r.a.createElement(Qe,{key:"petitions-management-view",title:"Petitions",entityType:"Petition",openModal:function(){e.setState({modalOpen:!0})}},r.a.createElement(lt,{headings:["Title","Order","Active","Short Description","Author","Created At","Updated At"],data:t.petitions.map(function(e){return{Id:e.id,Order:e.order,Title:e.title,Active:e.active,ShortDescription:e.short_description,Body:e.body,PrimaryImage:e.primary_image,VideoURL:e.video_url,ExternalURL:e.external_url,Users:e.users,Author:e.author.name,CreatedAt:new Date(e.createdAt),UpdatedAt:new Date(e.updatedAt)}}),leftAlignColumns:[0,1,2,3,4,5,6],hyperlinkColumns:[0],hyperlinkFunctions:[{index:0,fn:function(n){e.openModal(t.petitions.filter(function(e){return e.id===n.Id})[0])}}],formatColumns:[5,6],formatFunctions:[{index:5,fn:function(e){return et.formatTime(e)}},{index:6,fn:function(e){return et.formatTime(e)}}]})),this._renderModal()]}},{key:"_renderModal",value:function(){var e=this.state,t=e.entity,n=e.modalOpen,a=this.props,i=a.user,o=a.all_petitions;return n?(t.author_id=t.author.name?t.author.name:i.me.id,t.order=void 0!==t.order&&""!==t.order?t.order:o.petitions.length+1,r.a.createElement(qt,{key:"petitions-modal",entity:t,onClose:this._onCloseModal})):null}}]),t}(a.Component))||Qt)||Qt);function en(){var e=Object(T.a)(["\n\tmutation CreateUser(\n\t\t$username: String\n\t\t$email: String\n\t\t$password: String!\n\t\t$name: String!\n\t\t$phone: String\n\t\t$role_id: ID!\n\t) {\n\t\tcreateUser(\n\t\t\tdata: { \n\t\t\t\tusername: $username\n\t\t\t\temail: $email\n\t\t\t\tpassword: $password\n\t\t\t\tname: $name\n\t\t\t\tphone: $phone\n\t\t\t\trole: {\n\t\t\t\t\tconnect: {\n\t\t\t\t\t\tid: $role_id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t) {\n\t\t\tid\n\t\t\temail\n\t\t}\n\t}\n"]);return en=function(){return e},e}var tn=F()(en());function nn(){var e=Object(T.a)(["\n    mutation UpdateUser(\n        $id: ID!\n        $username: String\n\t\t$email: String\n\t\t$password: String!\n\t\t$name: String!\n\t\t$phone: String\n\t\t$role_id: ID!\n      ) {\n    updateUser(where: {\n        id: $id\n    },\n        data: {\n            username: $username\n\t\t\t\temail: $email\n\t\t\t\tpassword: $password\n\t\t\t\tname: $name\n\t\t\t\tphone: $phone\n\t\t\t\trole: {\n\t\t\t\t\tconnect: {\n\t\t\t\t\t\tid: $role_id\n\t\t\t\t\t}\n\t\t\t\t}\n    }) {\n        id\n        email\n    }\n  }\n"]);return nn=function(){return e},e}var an,rn=F()(nn()),on=Q(tn,{name:"createUser"})(an=Q(rn,{name:"updateUser"})(an=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(i)))).state={entity:n.props.entity},n.save=function(){var e=n.props,t=e.onClose,a=e.createUser,r=e.updateUser,i=e.roles,o=n.state.entity,l=o;l.role_id=l.role?l.role.id:i[0].id,o.id?r({variables:l}).then(function(e){t()}):(l.username=o.phone,a({variables:l}).then(function(e){t()}))},n.getContent=function(){var e=n.state.entity,t=n.props.roles;return[r.a.createElement(ct,{key:"email-input",value:e.email||"",label:"Email",onChange:function(e){n.updateEntity(e,"email")}}),r.a.createElement(ct,{key:"password-input",value:e.password||"",label:"Password",onChange:function(e){n.updateEntity(e,"password")}}),r.a.createElement(ct,{key:"name-input",value:e.name||"",label:"Name",onChange:function(e){n.updateEntity(e,"name")}}),r.a.createElement(ct,{key:"phone-input",value:e.phone||"",label:"Phone",onChange:function(e){n.updateEntity(e,"phone")}}),r.a.createElement(ft,{key:"role-input",currentValues:e.role?e.role.id:t[0].id,options:n.toDropdownOptions(t,"role_name"),label:"Role",onChange:function(e){n.updateRole(e)}}),r.a.createElement("div",{key:"total-points"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Total Points:"),"".concat(e.total_points||0)),r.a.createElement("div",{key:"created-at"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Created At:"),"".concat(et.formatTime(e.createdAt))),r.a.createElement("div",{key:"updated-at"},r.a.createElement("strong",{style:{marginRight:"5px"}},"Updated At:"),"".concat(et.formatTime(e.updatedAt)))]},n.updateEntity=function(e,t){var a=n.state.entity;if(e.target.value!==a[t]){var r=Object.assign({},a);"role.role_name"===t?r.role.role_name=e.target.value:r[t]=e.target.value,n.setState({entity:r})}},n.toDropdownOptions=function(e,t){return e.map(function(e){return{key:e.id,value:e.id,text:e[t]}})||[]},n.updateRole=function(e){var t=n.state.entity,a=n.props.roles;if(e.action&&e.value){var r=Object.assign({},t);r.role=a.filter(function(t){return t.id===e.value})[0],n.setState({entity:r})}},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state.entity,t=this.props.onClose,n=this.getContent();return r.a.createElement(Le,{onClose:t,entityType:"User",entity:e,modalContent:n,save:this.save})}}]),t}(a.Component))||an)||an;function ln(){var e=Object(T.a)(["\n  {\n    users {\n      id\n      name\n      password\n      phone\n      username\n      email\n      total_points\n      createdAt\n      updatedAt\n      role {\n        id\n        role_name\n      }\n    }\n  }\n"]);return ln=function(){return e},e}var cn=F()(ln());function un(){var e=Object(T.a)(["\n\t{\n\t\troles {\n\t\t\tid\n\t\t\trole_name\n\t\t}\n\t}\n"]);return un=function(){return e},e}var sn,dn=F()(un()),mn={id:"",email:"",password:"",name:"",phone:"",recent_actions:[{action:{title:""}}],total_points:0,petitions_signed:[{title:""}],createdAt:"",updatedAt:""},pn=Q(cn,{name:"all_users"})(sn=Q(dn,{name:"all_roles"})(sn=Object(I.a)(sn=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={modal:null,modalOpen:!1,entity:mn},n.openModal=function(e){n.setState({entity:e,modalOpen:!0})},n._onCloseModal=function(){n.props.all_users.refetch(),n.setState({modalOpen:null,entity:mn})},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.all_users;t.all_roles;return n.loading?r.a.createElement(St.a,{loading:!0,style:{height:"100vh",width:"100vw"}}):[r.a.createElement(Qe,{key:"users-management-view",title:"Users",entityType:"User",openModal:function(){e.setState({modalOpen:!0})}},r.a.createElement(lt,{headings:["Email","Name","Phone","Role","Created At","Updated At"],data:n.users.map(function(e){return{Id:e.id,Email:e.email,Password:e.password,Name:e.name,Phone:e.phone,Role:e.role?e.role.role_name:null,RecentActions:e.recent_actions,TotalPoints:e.total_points,PetitionsSigned:e.petitions_signed?e.petitions_signed.map(function(e){return e.title}).join(", "):null,CreatedAt:new Date(e.createdAt),UpdatedAt:new Date(e.updatedAt)}}),leftAlignColumns:[0,1,2,3,4,5],hyperlinkColumns:[0],hyperlinkFunctions:[{index:0,fn:function(t){e.openModal(n.users.filter(function(e){return e.id===t.Id})[0])}}],formatColumns:[4,5],formatFunctions:[{index:4,fn:function(e){return et.formatTime(e)}},{index:5,fn:function(e){return et.formatTime(e)}}]})),this._renderModal()]}},{key:"_renderModal",value:function(){var e=this.state,t=e.entity;if(!e.modalOpen)return null;var n=this.props.all_roles;return r.a.createElement(on,{key:"user-modal",entity:t,onClose:this._onCloseModal,roles:n.roles})}}]),t}(a.Component))||sn)||sn)||sn,hn=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],function(e){var t,n,a;return Object(l.graphql)(ge,{name:"user"})(t=Object(I.a)((a=n=function(t){function n(){return Object(x.a)(this,n),Object(w.a)(this,Object(k.a)(n).apply(this,arguments))}return Object(j.a)(n,t),Object(O.a)(n,[{key:"shouldComponentUpdate",value:function(e){return!(this.props.user.user&&!e.user.user)}},{key:"render",value:function(){var t=this.props,n=t.location,a=t.redirect,i=t.user;if(void 0!==i.user){if(i.loading)return null;if(!1===a)return null;var o=i.user?"home":"login";return r.a.createElement(he.a,{to:{pathname:"/".concat(o),state:{from:n}}})}return r.a.createElement(e,this.props)}}]),n}(r.a.Component),n.displayName="withUser(".concat(e.displayName||e.name,")"),t=a))||t)||t}}()(function(e,t){t.routes;return e.user.loading||e.user.me?r.a.createElement("div",{style:{overflow:"hidden",height:"100vh",backgroundColor:"lightgreen"},className:"container"},r.a.createElement(De,e),r.a.createElement($.a,{style:{height:"95vh"}},r.a.createElement(S.a,{exact:!0,path:"/",render:function(){return r.a.createElement(he.a,{to:"/home"})}}),r.a.createElement(S.a,{exact:!0,path:"/home",render:function(){return r.a.createElement(ke,e)}}),r.a.createElement(S.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(se,e)}}),r.a.createElement(S.a,{exact:!0,path:"/actions",render:function(){return r.a.createElement(Lt,e)}}),r.a.createElement(S.a,{exact:!0,path:"/games",render:function(){return r.a.createElement(Lt,e)}}),r.a.createElement(S.a,{exact:!0,path:"/petitions",render:function(){return r.a.createElement(Xt,e)}}),r.a.createElement(S.a,{exact:!0,path:"/users",render:function(){return r.a.createElement(pn,e)}}),r.a.createElement(S.a,{component:Ee}))):r.a.createElement(he.a,{to:{pathname:"/login",target:e.location}})}),fn=function(e){function t(){return Object(x.a)(this,t),Object(w.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement(A.a,null,r.a.createElement("div",null,r.a.createElement($.a,null,r.a.createElement(S.a,{exact:!0,path:"/login",component:pe}),r.a.createElement(S.a,{path:"/",component:hn}))))}}]),t}(a.Component),gn=function(e){function t(){return Object(x.a)(this,t),Object(w.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement(fn,null)}}]),t}(a.Component),yn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function vn(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(233).config("../../.env");var bn=r.a.createElement(l.ApolloProvider,{client:C},r.a.createElement(gn,null));o.a.render(bn,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");yn?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):vn(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):vn(e)})}}()}},[[454,2,1]]]);
//# sourceMappingURL=main.39acc9dc.chunk.js.map